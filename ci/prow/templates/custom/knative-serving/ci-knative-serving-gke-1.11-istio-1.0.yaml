- cron: "10 */2 * * *" # At minute 10 past every other hour
  name: ci-knative-serving-gke-1.11-istio-1.0
  agent: kubernetes
  spec:
    containers:
    - image: gcr.io/knative-tests/test-infra/prow-tests:stable
      imagePullPolicy: Always
      args:
      - "--scenario=kubernetes_execute_bazel"
      - "--clean"
      - "--job=$(JOB_NAME)"
      - "--repo=github.com/knative/serving"
      - "--root=/go/src"
      - "--service-account=/etc/test-account/service-account.json"
      - "--upload=gs://knative-prow/logs"
      - "--timeout=100" # Avoid overrun
      - "--" # end bootstrap args, scenario args below
      - "--" # end kubernetes_execute_bazel flags (consider following flags as text)
      - "./test/e2e-tests.sh"
      - "--cluster-version"
      - "1.11"
      - "--istio-version"
      - "1.0-latest"
      volumeMounts:
      - name: test-account
        mountPath: /etc/test-account
        readOnly: true
      env:
      - name: GOOGLE_APPLICATION_CREDENTIALS
        value: /etc/test-account/service-account.json
      - name: E2E_CLUSTER_REGION
        value: us-central1
    volumes:
    - name: test-account
      secret:
        secretName: test-account