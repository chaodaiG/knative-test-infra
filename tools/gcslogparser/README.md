## GCS log parser

GCS log parser is a multi-threading log parser for quickly identifying build logs that contain certain string (pattern). This tool is intended to be used on job logs generated by Prow, and so far only works on Knative prow with no modification.

## Usage

This tool is written to be invoked directly, with following parameters:

- `--service-account` (required): key file for GCS service account
- `--parser` (required): regex string used for parsing
- `--repo` (optional): repo to be analyzed, comma separated. Default to test-infra
- `--start-date` (optional): cut off date to be analyzed, in the format of YYYY-MM-DD. Default to 2017-01-01
- `--jobs` (optional): jobs to be analyzed, comma separated. Default to "", which means all jobs under the repo
- `--pr-only` (optional): supplied if just want to analyze PR jobs. Default to false
- `--ci-only` (optional): supplied if just want to analyze CI jobs. Default to false

### Example:

Parsing all jobs under default repo (test-infra), looking for string "Desired log string"
```shell
go run . --service-account [SERVICE_ACCOUNT_JSON_FILE] --parser "Desired log string"
```

Parsing `ci-knative-docs-continuous` and `pull-knative-docs-build-tests` jobs, looking for string "Some other desired log string"
```shell
go run . --service-account [SERVICE_ACCOUNT_JSON_FILE] --parser "Some other desired log string" --jobs "ci-knative-docs-continuous,pull-knative-docs-build-tests"
```

Parsing all PRs under serving repo, looking for string "Desired log string"
```shell
go run . --service-account [SERVICE_ACCOUNT_JSON_FILE] --parser "Desired log string" --repo "serving" --pr-only
```
